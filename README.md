# 코틀린 고급

1. 컬렉션
   - 코틀린 표준 라이브러리는 기본 컬렉션 타입인 `List`, `Set`, `Map`을 제공한다.
   - 컬렉션은 두 가지 종류로 나뉜다.
     - **불변 컬렉션**(Immutable): 읽기 전용 컬렉션
     - **가변 컬렉션**(Mutable): 삽입, 수정, 삭제와 같은 쓰기 작업이 가능한 컬렉션
   - Immutable 리스트 생성
   - Mutable 리스트 생성
     - `apply` 함수를 사용하면 가독성이 좋아진다.
   - Immutable 세트 생성
   - Mutable 세트 생성
   - Immutable 맵 생성
     - `to`라는 중위 함수로 key-value구조를 전달한다.
   - Mutable 맵 생성
   - `컬렉션 빌더`를 사용하여 컬렉션을 생성할 수 있다.
     - buildList, buildSet, buildMap 3종류를 제공
   - build 내부에선 **Mutable(가변)**이고 반환시엔 **Immutalbe(불변)**이다.
   - 특정 구현체를 사용하고 싶은 경우, 구현체의 생성자를 사용한다.
   - 코틀린의 컬렉션은 `Iterable`의 구현체이므로 순차적으로 반복이 가능하다.
   - 자바에선 `forEach`를 사용하면 Iterable을 구현한 컬렉션을 반복할 수 있다.
   - 또한 코틀린 표준 라이브러리에는 컬렉션 사용 시 자주 사용되는 패턴인 `forEach`, `map`, `filter`와 같은 유용한 **인라인 함수**를 제공한다.
   - 자바 8의 스트림은 중간 연산자(map, filter, flatMap 등)만 사용했을 땐 아무런 동작도 하지 않는다.
     - **값을 얻고 싶다면 최종 연산자(terminal operator)를 사용해야 한다.**
   - 코틀린에서는 `sequence`를 사용해 자바8 스트림과 같이 Lazy하게 동작시킬 수 있다.
     - 시퀀스 API도 최종 연산자를 사용해야 중간 연산자가 동작한다.
   - 일반적으로 인라인 함수는 각각 함수가 **동작할 때마다** 조건에 맞는 컬렉션을 생성한다.
   - 시퀀스 API는 각각의 함수가 동작할 때 시퀀스를 생성하고 최종 연산자를 호출할 때 `1`개의 컬렉션을 생성한다.
   - 벤치마크상으로 일반적으론 인라인 함수가 빠르기 때문에 인라인 함수를 쓰고, 대량의 데이터를 다룰 때는 시퀀스 API를 사용하길 추천